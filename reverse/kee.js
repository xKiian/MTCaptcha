const URLSafeBase64Int2CharMap = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '-', '_']
const URLSafeBase64CharCode2IntMap = [-0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, 0x3e, -0x1, -0x1, 0x0, 0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 0x8, 0x9, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, 0xa, 0xb, 0xc, 0xd, 0xe, 0xf, 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18, 0x19, 0x1a, 0x1b, 0x1c, 0x1d, 0x1e, 0x1f, 0x20, 0x21, 0x22, 0x23, -0x1, -0x1, -0x1, -0x1, 0x3f, -0x1, 0x24, 0x25, 0x26, 0x27, 0x28, 0x29, 0x2a, 0x2b, 0x2c, 0x2d, 0x2e, 0x2f, 0x30, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3a, 0x3b, 0x3c, 0x3d, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1, -0x1]

class Kee {
    init(_0xc312f2) {
        this.TAIL_KEEINT = 63;
        this.lastKeeTS = -0x1;
        this.ciderb64int = null;
        this.keehist = null;
        this.keehistPos = 0x0;
        this.prevString = '';
        if (_0xc312f2 == null || _0xc312f2.length < 0x40) {
            return;
        }
        if (_0xc312f2.length >= 0x40) {
            _0xc312f2 = _0xc312f2.substring(0x0, 0x40);
        }
        var _0x1c59a2 = new Array(_0xc312f2.length);
        var _0x490ff9 = URLSafeBase64CharCode2IntMap[_0xc312f2.charCodeAt(_0xc312f2.length - 0x1)];
        for (var _0x46234c = 0x0; _0x46234c < _0xc312f2.length; _0x46234c++) {
            var _0x16c42a = _0xc312f2.charCodeAt(_0x46234c);
            var _0x3e848d = URLSafeBase64CharCode2IntMap[_0x16c42a];
            _0x1c59a2[_0x46234c] = _0x3e848d ^ _0x490ff9;
            _0x490ff9 = _0x3e848d;
        }
        this.ciderb64int = _0x1c59a2;
        this.keehist = _0x1c59a2.slice(0x0, _0x1c59a2.length);
        this.keehistPos = 0x0;
    }
    getKey(_0x3f6f91) {
        var _0x31bc11 = '';
        var _0x373ecd = this.prevString;
        if (_0x3f6f91 != null && _0x373ecd.length <= _0x3f6f91.length) {
            _0x3f6f91.split('').forEach(function (_0x35fbc1, _0xfb596d) {
                if (_0x35fbc1 != _0x373ecd.charAt(_0xfb596d)) {
                    _0x31bc11 += _0x35fbc1;
                }
            });
            this.prevString = _0x3f6f91;
            return _0x31bc11[0x0];
        } else {
            this.prevString = _0x3f6f91 == null ? '' : _0x3f6f91;
            return "Backspace";
        }
    }

    play(value) {
        var _0x3ffa08 = this.ciderb64int;
        if (_0x3ffa08 == null) {
            return false;
        }
        var _0x4eabfe = this.getKey(value);
        var _0x8e8fde = this.keehist;
        var _0x11b8a8 = this.keehistPos;
        var _0x3200e4 = Date.now();
        var _0x358c73 = this.lastKeeTS;
        if (_0x11b8a8 === 0x0) {
            var _0x2b1a3c = Math.round((_0x3200e4 - this.initTS) / 0x1f4);
            if (_0x2b1a3c > 0xf3c) {
                _0x2b1a3c = 0xf3c;
            }
            var _0xc801a8 = Math.floor(_0x2b1a3c / 0x40);
            var _0x423d94 = Math.round(_0x2b1a3c % 0x40);
            _0x8e8fde[0x0] = _0x3ffa08[0x0] ^ _0xc801a8;
            _0x8e8fde[0x1] = _0x3ffa08[0x1] ^ _0x423d94;
            _0x8e8fde[0x2] = _0x3ffa08[0x2] ^ this.TAIL_KEEINT;
            _0x11b8a8 += 0x2;
            this.keehistPos = _0x11b8a8;
        }
        if (_0x4eabfe === '-' || _0x4eabfe === 45) {
            return false;
        }
        if (_0x4eabfe === "Backspace" || _0x4eabfe === 0x8) {
            _0x4eabfe = '-';
        }
        if (typeof _0x4eabfe === "string" && _0x4eabfe.length > 0x1) {
            return false;
        }
        var _0x1fe822 = typeof _0x4eabfe === "string" ? _0x4eabfe.charCodeAt(0x0) : _0x4eabfe;
        var _0x1e9aba = _0x1fe822 in URLSafeBase64CharCode2IntMap ? URLSafeBase64CharCode2IntMap[_0x1fe822] : -0x1;

        var _0x2b1a3c = Math.round((_0x358c73 < 0x0 ? 0x0 : _0x3200e4 - _0x358c73) / 0x1e);
        if (_0x2b1a3c > 0x3f) {
            _0x2b1a3c = 0x3f;
        }
        _0x8e8fde[_0x11b8a8] = _0x3ffa08[_0x11b8a8] ^ _0x1e9aba;
        _0x8e8fde[_0x11b8a8 + 0x1] = _0x3ffa08[_0x11b8a8 + 0x1] ^ _0x2b1a3c;
        _0x8e8fde[_0x11b8a8 + 0x2] = _0x3ffa08[_0x11b8a8 + 0x2] ^ this.TAIL_KEEINT;

        this.keehistPos = _0x11b8a8 + 0x2;
        this.lastKeeTS = _0x3200e4;
        return true;
    }


    get() {
        var _0x49e5a = new Array(this.keehist.length);
        for (var _0x302d6d = 0x0; _0x302d6d < this.keehist.length; _0x302d6d++) {
            _0x49e5a[_0x302d6d] = URLSafeBase64Int2CharMap[this.keehist[_0x302d6d]];
        }
        return _0x49e5a.join('');
    }
}

const k = new Kee();
k.init("VSUFhjii7scj36xjdJJgYVCyK7pJ_s0tUX8cjI68iDb5izqgVyHXZDwcJJcDNHSb");

k.play("s");
k.play("sJ");
k.play("sJc");
k.play("sJcM");
k.play("sJcMi");

console.log(k.get());